# [ ] 优化校友图册
## 校友图册页面出现卡顿，如何定位到到底什么才是导致卡顿的真实原因
1. 使用浏览器性能分析工具进行分析
- `commit`：提交渲染树。浏览器主线程完成布局和样式计算，将数据提交给合成线程显示。86.4ms(20.6%)。
原因：拖动时大量改变DOM，DOM树的高度太大
- `pre-paint`：浏览器在实际绘制像素前，检查哪些元素发生改变，哪些需要重绘。57.6ms(13.7)。
原因：卡片的阴影，圆角等要素。
- `Evaluate script`：self time 3.3ms，total time 228.5ms。js代码执行快，但是它触发了后续及其耗时的渲染链条。

## 如何解决这个问题
1. 使用缩略图，当罗列显示的时候使用小图，当全屏显示的时候使用大图
- ** 安装sharp库 **
```sh
npm install sharp
```
- 修改自定义协议，当路径带有`?type=thumb`时，自动生成并返回缩略图